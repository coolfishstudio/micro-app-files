!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["micro-app-files-main"]=t():e["micro-app-files-main"]=t()}(self,(()=>(()=>{var e,t,n,r={9745:(e,t,n)=>{"use strict";n.r(t),n.d(t,{bootstrap:()=>yt,mount:()=>bt,unmount:()=>wt,update:()=>kt});var r=n(5861),i=n(4687),a=n.n(i),s=n(7294),o=n(3935),c=n(2507),u=n(9439),l=n(6248),d=n(4942),f=(0,n(270).Ue)((function(e,t){return{curLibrary:"",curPaths:[],librarys:[],fileListType:"card",fileList:[],needRefreshAt:null,searchFileListLoading:!1,beforeUploadList:[],uploadList:[],setStore:function(t){var n=t.key,r=t.value,i=(0,d.Z)({},n,r);"curLibrary"===n&&(i.curPaths=[]),e(i)}}})),p=(n(3843),n(3710),n(9810),n(7327),n(1539),n(8309),n(2222),n(1249),n(8674),n(2861)),h=(n(9714),n(9653),n(2772),n(4916),n(5306),n(3210),n(4986),n(7042),n(4678),n(6977),n(7601),n(6992),n(8783),n(3948),n(285),n(1637),n(4466));const v=function(e,t){h.ZP.destroy(),h.ZP[e](t)};var m={host:"https://api.github.com",githubusercontent:"https://raw.githubusercontent.com",user:"coolfishstudio",repository:"files",branch:"mytab",perpage:30,sort:"created",token:"".concat("ghp","_").concat("JKNgZnYzrqq").concat("b2ICREzYOjQn").concat("FuDG3Cl0BMYOE")},x={png:"image",jpeg:"image",gif:"image",bmp:"image",jpg:"image",webp:"image",svg:"image",avif:"image",mp4:"video",mov:"video",m3u8:"video",wmv:"video",rm:"video","3gp":"video",mkv:"video",flv:"video",rmvb:"video",swf:"video",vob:"video",avi:"video",mp3:"audio",flac:"audio",wav:"audio",m4a:"audio",pdf:"pdf",xls:"excel",xlsx:"excel",csv:"excel",numbers:"excel",docx:"doc",doc:"doc",txt:"txt",zip:"zip",ppt:"ppt",pptx:"ppt",md:"markdown",gltf:"model",glb:"model"},y=function(){return m.user},j=function(){return m.repository},b=function(){return m.branch},g=function(e,t){return"https://".concat(m.user,".github.io/").concat(m.repository,"/").concat(t)},w=function(e,t){return"https://jsd.cdn.zzko.cn/gh/".concat(m.user,"/").concat(m.repository,"@").concat(e,"/").concat(t)},Z=function(e,t){return"https://cdn.jsdelivr.net/gh/".concat(m.user,"/").concat(m.repository,"@").concat(e,"/").concat(t)},k=function(e){var t=e.lastIndexOf(".");return t>0?e.substring(t+1).toLowerCase():null},P=function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return new Promise((function(t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e=n.result;t(e)},n.onerror=function(){return t(null)}}))},L=function(e){return new Promise(function(){var t=(0,r.Z)(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e||n(null),t.next=3,O(e);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0="";case 6:(r=t.t0).length>=31457280&&(v("error","".concat(e.name," 超过 ").concat(30," MB，跳过选择")),n(null)),n({uuid:(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)+"-"+(65536*(1+Math.random())|0).toString(16).substring(1)+"-"+(65536*(1+Math.random())|0).toString(16).substring(1)+"-"+(65536*(1+Math.random())|0).toString(16).substring(1)+"-"+(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1),base64:r,file:e,info:{name:(i=e.name,void 0,a=i.indexOf("."),i.substr(0,a).trim().replace(/\s+/g,"-")),suffix:k(e.name),nameType:"none",extend:null,hash:Number(Math.random().toString().substr(2,5)+Date.now()).toString(36),time:Date.now()}});case 9:case"end":return t.stop()}var i,a}),t)})));return function(e){return t.apply(this,arguments)}}())};const N={_core:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};r["Content-Type"]||(r["Content-Type"]="application/json");var i=m.token;i&&(r.Authorization="token ".concat(i));var a={url:e,method:n,headers:r};return"GET"===n?a.params=t:a.data=t,(0,p.Z)(a).then((function(e){return Promise.resolve(e.data)})).catch((function(e){var t,n,r=(null===(t=e.response)||void 0===t?void 0:t.data)||null;return 401===(null===(n=e.response)||void 0===n?void 0:n.status)&&(r={status:{code:401401,message:"非法用户操作"}}),Promise.reject(r)}))},get:function(e){var t=e.url,n=e.data,r=e.headers;return this._core(t,n,"GET",r)},post:function(e){var t=e.url,n=e.data,r=e.headers;return this._core(t,n,"POST",r)},put:function(e){var t=e.url,n=e.data,r=e.headers;return this._core(t,n,"PUT",r)},delete:function(e){var t=e.url,n=e.data,r=e.headers;return this._core(t,n,"DELETE",r)}};var S=function(e){var t=e.library,n=e.path,r=y(),i=j(),a=b();return N.get({url:"".concat(m.host,"/repos/").concat(r,"/").concat(i,"/contents/").concat(t)+"".concat(n?"/"+n:""),data:{"no-cache":Date.now(),ref:a}})},C=function(e){var t=e.library,n=e.path,r=e.content,i=e.message,a=y(),s=j(),o=b();return N.put({url:"".concat(m.host,"/repos/").concat(a,"/").concat(s,"/contents/").concat(t,"/").concat(n),data:{"no-cache":Date.now(),ref:o,content:r,message:i}})};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(9554),n(4747),n(8862),n(7941),n(2526),n(5003),n(9337),n(3321),n(9070);var z={set:function(e,t){if(!this.disabled)return void 0===t?this.remove(e):(this.storage.setItem(e,function(e){return JSON.stringify(e)}(t)),t)},get:function(e,t){if(this.disabled)return t;var n=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}(this.storage.getItem(e));return void 0===n?t:n},has:function(e){return void 0!==this.get(e)},remove:function(e){this.disabled||this.storage.removeItem(e)},clear:function(){this.disabled||this.storage.clear()},getAll:function(){if(this.disabled)return null;var e={};return this.forEach((function(t,n){e[t]=n})),e},forEach:function(e){if(!this.disabled)for(var t=0;t<this.storage.length;t++){var n=this.storage.key(t);e(n,this.get(n))}}};const E=T({storage:window.localStorage,session:T({storage:window.sessionStorage},z)},z);var D="__mytab_pics_librarys__",R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?{success:!0,data:t}:{success:!1,msg:t||"操作异常，请刷新看看"}},I=function(){var e=(0,r.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a().mark((function t(){var n,r,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],r=!0,e||(i=E.get(D,{list:[]}),n=i.list,r=0===n.length||Date.now()-i.at>=864e5),!r){t.next=11;break}return t.next=6,void 0,void 0,void 0,a=y(),o=j(),c=b(),N.get({url:"".concat(m.host,"/repos/").concat(a,"/").concat(o,"/contents"),data:{ref:c}});case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0=[];case 9:n=t.t0,null!==(s=n)&&void 0!==s&&s.message||(n=n.filter((function(e){return"dir"===e.type})),E.set(D,{at:Date.now(),list:n}));case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}var a,o,c}),t)}))()}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)((function(e){var t=e.library,n=e.path;return a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,S({library:t,path:n});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return i=e.t0,r=i.msg?R(!1):R(!0,i.filter((function(e){return".init"!==e.name}))),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))()}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)((function(e,t){var n=t.library,r=t.path;return a().mark((function t(){var i,s,o,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(r?r+"/":"").concat(e,"/.init"),t.next=3,C({library:n,path:s,message:"add a forder",content:"5q2k5paH5Lu255So5LqO5Yib5bu65paH5Lu25aS5"});case 3:return o=t.sent,{},c=null!=o&&null!==(i=o.content)&&void 0!==i&&i.sha?R(!0,o):R(!1),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)}))()}));return function(t,n){return e.apply(this,arguments)}}(),M=n(6445),U=n(386),F=n(3433),H=n(6459),G=(n(9600),n(2665)),J=n(9271),Y=n(5893),q=function(e){return{curPaths:e.curPaths,setCurPaths:function(t){return e.setStore({key:"curPaths",value:t})}}};const W=function(){var e=f(q,l.X),t=e.curPaths,n=e.setCurPaths,r=[""].concat(t),i=r.map((function(e,i){var a={title:e,href:"",onClick:function(r){var i;r.preventDefault(),i=e,n(t.slice(0,t.lastIndexOf(i)+1))}};return""===e&&(a.title=(0,Y.jsx)(J.Z,{})),i===r.length-1&&(delete a.onClick,delete a.href),a}));return 0===t.length?(0,Y.jsx)("div",{}):(0,Y.jsx)(G.Z,{items:i})};var X=n(6432),K=n(4158),Q=n(5460),V=n(1577),$=(n(9671),n(3171),n(5405)),ee=n(7551),te=n(6178),ne=n(8528),re=n(2485);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const ae=function(e){return(0,Y.jsx)(re.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"",okText:"确定",cancelText:"取消",centered:!0,destroyOnClose:!0,closeIcon:!1,maskClosable:!1},e))};var se=function(e){return{curLibrary:e.curLibrary,curPaths:e.curPaths,setNeedRefreshAt:function(){return e.setStore({key:"needRefreshAt",value:Date.now()})}}};const oe=function(e){var t=e.type,n=e.className,i=f(se,l.X),o=i.curLibrary,c=i.curPaths,d=i.setNeedRefreshAt,p=(0,s.useState)(!1),h=(0,u.Z)(p,2),m=h[0],x=h[1],y=(0,s.useState)(!1),j=(0,u.Z)(y,2),b=j[0],g=j[1],w=(0,s.useState)(""),Z=(0,u.Z)(w,2),k=Z[0],P=Z[1],O=function(){return x(!0)},L=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return",null);case 2:g(!0),A(k,{library:o,path:c.join("/")||null}).then((function(e){e.success?(v("success","新文件夹创建成功"),g(!1),x(!1),P(""),d()):v("error","新文件夹创建失败")}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Y.jsxs)(Y.Fragment,{children:["text"===t?(0,Y.jsx)("span",{onClick:O,className:n,children:"新文件夹"}):(0,Y.jsx)(V.ZP,{type:"primary",ghost:!0,icon:(0,Y.jsx)(ne.Z,{}),onClick:O,children:"新文件夹"}),(0,Y.jsx)(ae,{open:m,title:"新建文件夹",okText:"创建",cancelText:"取消",onOk:L,onCancel:function(){return x(!1)},confirmLoading:b,children:(0,Y.jsx)("div",{className:"view-fCgiAk",children:(0,Y.jsx)(te.Z,{placeholder:"请输入文件夹名",onChange:function(e){b||P(e.target.value)},value:k})})})]})};var ce=n(8892),ue=n(2298),le=n(4634),de=n(6117),fe=(n(4553),n(5483)),pe=n(7648),he=n(1317),ve=n(5768),me=n(8587),xe=n(6437),ye=n(8007),je=n(8791),be=n(4164),ge=n(5040),we=n(1019),Ze=n(2023),ke=n(7149);var Pe=function(e){return{curLibrary:e.curLibrary}};const Oe=function(e){var t,n,r=e.data,i=e.needImagePreview,a=e.size,s=(f(Pe,l.X).curLibrary,"file"===r.type?k(r.name):null),o="dir"===r.type?"dir":x[s||""]||"unknown",c=(t=o,n={dir:(0,Y.jsx)(fe.Z,{style:{fontSize:a,color:"#ffca5b"}}),image:(0,Y.jsx)(pe.Z,{style:{fontSize:a,color:"#7cb305"}}),video:(0,Y.jsx)(he.Z,{style:{fontSize:a,color:"#597ef7"}}),audio:(0,Y.jsx)(ve.Z,{style:{fontSize:a,color:"#ff4d4f"}}),model:(0,Y.jsx)(me.Z,{style:{fontSize:a,color:"#383948"}}),pdf:(0,Y.jsx)(xe.Z,{style:{fontSize:a,color:"#fe3e3c"}}),excel:(0,Y.jsx)(ye.Z,{style:{fontSize:a,color:"#0c9d4d"}}),doc:(0,Y.jsx)(je.Z,{style:{fontSize:a,color:"#2175ff"}}),txt:(0,Y.jsx)(be.Z,{style:{fontSize:a,color:"#69b1ff"}}),zip:(0,Y.jsx)(ge.Z,{style:{fontSize:a,color:"#ad4e00"}}),ppt:(0,Y.jsx)(we.Z,{style:{fontSize:a,color:"#ff5f39"}}),markdown:(0,Y.jsx)(Ze.Z,{style:{fontSize:a,color:"#08979c"}}),unknown:(0,Y.jsx)(ke.Z,{style:{fontSize:a,color:"#595959"}})},(0,Y.jsx)("div",{className:"thumbImage-It8fUy",children:n[t]||n.unknown}));return"image"===o&&i&&(r.path?c=(0,Y.jsx)("img",{src:g(0,r.path)}):r.base64&&(c=(0,Y.jsx)("img",{src:r.base64}))),(0,Y.jsx)("div",{className:"view-F3mtGz",children:c})},Le="action-O7WZCE",Ne="label-x_kFxU",Se="value-yHhQOR";var Ce=function(e){return{beforeUploadList:e.beforeUploadList,setBeforeUploadList:function(t){return e.setStore({key:"beforeUploadList",value:t})}}};const _e=function(e){var t=e.open,n=e.handleCancel,r=e.handleOk,i=f(Ce,l.X),a=i.beforeUploadList,o=i.setBeforeUploadList,c=(0,s.useState)(!1),d=(0,u.Z)(c,2),p=d[0];return d[1],(0,Y.jsx)(ae,{open:t,title:"文件上传",okText:"上传全部",cancelText:"取消",onOk:r,onCancel:n,confirmLoading:p,width:700,children:(0,Y.jsx)("div",{className:"list-VzExp8",children:a.map((function(e){return(0,Y.jsxs)("div",{className:"item-YSnjUx",children:[(0,Y.jsx)("div",{className:"cover-v3jL8B",children:(0,Y.jsx)(Oe,{data:{type:"file",name:e.file.name,base64:e.base64},needImagePreview:!0,size:48})}),(0,Y.jsxs)("div",{className:"info-oCrbwG",children:[(0,Y.jsxs)("div",{className:"title-gQDv5S",children:[(0,Y.jsx)("div",{className:Ne,children:"文件名称"}),(0,Y.jsx)("div",{className:Se,children:(0,Y.jsx)(te.Z,{placeholder:"请输入文件名",onChange:function(t){return function(e,t){if(p)return null;var n=a.findIndex((function(e){return e.uuid===t}));-1!==n&&(a[n].info.name=e.target.value,o(a))}(t,e.uuid)},value:e.info.name,addonAfter:".".concat([e.info.extend,e.info.suffix].filter((function(e){return e})).join("."))})})]}),(0,Y.jsxs)("div",{className:"actions-lnAnB8",children:[(0,Y.jsxs)("div",{className:Le,children:[(0,Y.jsx)("div",{className:Ne,children:"名称设置"}),(0,Y.jsx)("div",{className:Se,children:(0,Y.jsxs)(de.ZP.Group,{onChange:function(t){return function(e,t){if(p)return null;var n=a.findIndex((function(e){return e.uuid===t}));-1!==n&&(a[n].info.nameType=e.target.value,"none"===e.target.value&&(a[n].info.extend=null),"hash"===e.target.value&&(a[n].info.extend=a[n].info.hash),"time"===e.target.value&&(a[n].info.extend=a[n].info.time),o(a))}(t,e.uuid)},value:e.info.nameType||"none",children:[(0,Y.jsx)(de.ZP,{value:"none",children:"无"}),(0,Y.jsx)(de.ZP,{value:"hash",children:"哈希化"}),(0,Y.jsx)(de.ZP,{value:"time",children:"时间戳"})]})})]}),(t=e.info.suffix,"image"===x[t]&&(0,Y.jsxs)("div",{className:Le,children:[(0,Y.jsx)("div",{className:Ne,children:"图片设置"}),(0,Y.jsx)("div",{className:Se,children:(0,Y.jsx)(le.Z.Group,{options:[{label:"水印",value:"watermark"},{label:"压缩",value:"compress"}],value:e.info.setting,onChange:function(t){return function(e,t){if(p)return null;var n=a.findIndex((function(e){return e.uuid===t}));-1!==n&&(a[n].info.setting=e,o(a))}(t,e.uuid)}})})]}))]})]})]},e.uuid);var t}))})})};var Te=function(e){return{beforeUploadList:e.beforeUploadList,setBeforeUploadList:function(t){return e.setStore({key:"beforeUploadList",value:t})}}};const ze=function(e){var t=e.type,n=e.className,i=f(Te,l.X),o=i.beforeUploadList,c=i.setBeforeUploadList,d=(0,s.useState)(!1),p=(0,u.Z)(d,2),h=p[0],v=p[1],m=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return(n=e.sent)&&(o.push(n),c(o)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ce.Z,{name:"file",multiple:!0,showUploadList:!1,beforeUpload:m,onChange:function(){h||v(!0)},customRequest:function(){return!1},children:"text"===t?(0,Y.jsx)("span",{className:n,children:"文件上传"}):(0,Y.jsx)(V.ZP,{type:"primary",icon:(0,Y.jsx)(ue.Z,{}),children:"文件上传"})}),(0,Y.jsx)(_e,{handleCancel:function(){v(!1),c([])},handleOk:function(){v(!1),c([])},open:h})]})};var Ee=n(3754),De=n(7937),Re=n(7085),Ie=n(9317),Be=n(4184),Ae=n.n(Be);const Me={container:"container-mck4xc",bell:"bell-CqnH_k",emphasize:"emphasize-sLwSpT",popover:"popover-xZtCx3",view:"view-OTAKQF",item:"item-pEtHrN"},Ue=function(e){(0,H.Z)(e);var t=(0,Y.jsx)("div",{className:Me.view,children:["","","","","","","","","","","",""].map((function(e,t){return(0,Y.jsxs)(X.Z,{className:Me.item,size:24,children:[(0,Y.jsx)("div",{className:Me.name,children:"123123.2213123.webp"}),(0,Y.jsxs)(X.Z,{className:Me.result,size:12,children:[(0,Y.jsx)(Re.Z,{}),(0,Y.jsx)("span",{children:"上传中..."})]})]},t)}))});return(0,Y.jsx)(Ee.Z,{overlayClassName:Me.popover,placement:"bottomRight",arrow:!1,title:"任务中心",content:t,trigger:"click",getPopupContainer:function(e){return e.parentElement},children:(0,Y.jsxs)("div",{className:Ae()(Me.container),children:[(0,Y.jsx)(Ie.Z,{className:Me.bell}),(0,Y.jsx)(De.Z,{strokeLinecap:"butt",percent:75,showInfo:!1,size:["100%",2]})]})})};var Fe=n(5592),He=function(e){return{setNeedRefreshAt:function(){return e.setStore({key:"needRefreshAt",value:Date.now()})}}};const Ge=function(){var e=f(He,l.X).setNeedRefreshAt;return(0,Y.jsx)(V.ZP,{icon:(0,Y.jsx)(Fe.Z,{}),onClick:e,children:"刷新"})};var Je=function(e){return{curPaths:e.curPaths,fileListType:e.fileListType,setFileListType:function(t){return e.setStore({key:"fileListType",value:t})}}};const Ye=function(e){(0,H.Z)(e);var t=f(Je,l.X),n=t.fileListType,r=t.setFileListType,i=t.curPaths;return(0,Y.jsxs)(X.Z,{size:8,children:[(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(ze,{}),i.length<5&&(0,Y.jsx)(oe,{}),(0,Y.jsx)(Ge,{})]}),(0,Y.jsx)(Q.Z,{type:"vertical"}),(0,Y.jsx)(K.Z,{value:n,onChange:function(e){return r("".concat(e))},options:[{value:"card",icon:(0,Y.jsx)($.Z,{})},{value:"list",icon:(0,Y.jsx)(ee.Z,{})}]}),(0,Y.jsx)(Ue,{})]})};var qe=n(403),We=n(6308),Xe=(n(6699),n(4131)),Ke=n(6830),Qe=n(6161),Ve=n(645),$e=n(9609),et=n(2977);var tt=function(e){return{fileListType:e.fileListType,curLibrary:e.curLibrary}};const nt=function(e){var t,n=e.data,i=e.onClick,s=f(tt,l.X),o=s.curLibrary,c=s.fileListType,u=function(){var e=(0,r.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="","gitHubPath"===t&&(i=o,a=n.path,r="https://raw.githubusercontent.com/".concat(m.user,"/").concat(m.repository,"/").concat(i,"/").concat(a)),"staticalyPath"===t&&(r=g(0,n.path)),"chinaJsDelivrPath"===t&&(r=w(o,n.path)),"jsDelivrPath"===t&&(r=Z(o,n.path)),e.next=7,P(r);case 7:v("success","复制成功");case 8:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v("warning","暂不支持");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p="file"===n.type?k(n.name):null,h=function(e,t){if(!e)return"0 B";var n,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=r.indexOf("YB"),a=r.slice(0,i+1),s=parseFloat(e);n=Math.floor(Math.log(s)/Math.log(1024));var o=+(s/Math.pow(1024,n)).toFixed(2);return"".concat(o," ").concat(a[n])}(n.size),y="dir"===n.type?"dir":x[p||""]||"unknown";t="dir"===y?(0,Y.jsx)(Xe.Z,{style:{color:"#fa8c16"}}):"image"===y?(0,Y.jsx)(Ke.Z,{style:{color:"#2f54eb"}}):"video"===y?(0,Y.jsx)(Qe.Z,{style:{color:"#2f54eb"}}):"audio"===y?(0,Y.jsx)(Ve.Z,{style:{color:"#2f54eb"}}):(0,Y.jsx)($e.Z,{style:{color:"#bfbfbf"}});var j,b,O={items:[{key:"gitHubPath",label:"GitHub"},{key:"staticalyPath",label:"Staticaly"},{key:"chinaJsDelivrPath",label:"ChinaJsDelivr"},{key:"jsDelivrPath",label:"JsDelivr"}].filter((function(e){return"dir"!==y||"gitHubPath"===e.key})),onClick:(j=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["staticalyPath","gitHubPath","chinaJsDelivrPath","jsDelivrPath"].includes(t.key)){e.next=3;break}return e.next=3,u(t.key);case 3:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})},L={items:[{key:"share",label:"分享",children:O.items},{type:"divider"},{key:"remove",label:"删除"}],onClick:(b=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"remove"===t.key?d():O.onClick(t);case 1:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})};return(0,Y.jsx)("div",{className:Ae()("item-fJr0HU","card"===c&&"card-HzlxRZ","list"===c&&"list-eFW3GV"),children:(0,Y.jsx)("div",{className:Ae()("wrap-OURLvq","dir"===n.type&&"dir-Ykdm41"),children:(0,Y.jsxs)("div",{className:"panel-Wf0QOM",children:[(0,Y.jsx)("div",{className:"cover-wgyqs4",onClick:i,children:(0,Y.jsx)("div",{className:"view-dKK5lo",children:(0,Y.jsx)(Oe,{data:n,needImagePreview:"card"===c,size:"card"===c?48:22})})}),(0,Y.jsxs)("div",{className:"info-VJNAvV",onClick:i,children:[(0,Y.jsx)("div",{className:"title-vDZlLG",children:n.name}),(0,Y.jsxs)("div",{className:"attr-gYpwA6",children:[(0,Y.jsx)("div",{className:"tags-dHvRdx",children:(0,Y.jsxs)(X.Z,{children:[p&&(0,Y.jsx)(We.Z,{color:"geekblue",children:p.toUpperCase()}),"dir"!==n.type&&(0,Y.jsx)(We.Z,{color:"purple",children:h})]})}),(0,Y.jsx)("div",{className:"fileTypeIcon-JmoGvy",children:t})]})]}),(0,Y.jsx)("div",{className:"more-jxB0Dh",children:"card"===c?(0,Y.jsx)(qe.Z,{menu:L,placement:"topRight",getPopupContainer:function(e){return e.parentElement.parentElement},children:(0,Y.jsx)(V.ZP,{size:"small",icon:(0,Y.jsx)(et.Z,{rotate:90})})}):(0,Y.jsxs)(X.Z,{children:[(0,Y.jsx)(qe.Z,{menu:O,placement:"topRight",getPopupContainer:function(e){return e.parentElement.parentElement},children:(0,Y.jsx)(V.ZP,{size:"small",children:"分享"})}),(0,Y.jsx)(V.ZP,{size:"small",onClick:d,children:"删除"})]})}),(0,Y.jsx)("div",{className:"mult-tT4_9a",children:"dir"!==y&&(0,Y.jsx)(le.Z,{})})]})})},"".concat(c,"-").concat(n.uuid))};var rt=n(5279);const it="upload-pdrVTM";var at=function(e){return{curPaths:e.curPaths}};const st=function(){var e=f(at,l.X).curPaths;return(0,Y.jsx)("div",{className:"container-JEWtsR",children:(0,Y.jsxs)("div",{className:"panel-RWLrvy",children:[(0,Y.jsx)("div",{className:"icon-kmA75B",children:(0,Y.jsx)(rt.Z,{})}),(0,Y.jsx)("div",{className:"title-zqxT47",children:"文件夹为空"}),(0,Y.jsxs)("div",{className:"desc-fHCaEJ",children:[(0,Y.jsx)("span",{children:"点击浏览"}),(0,Y.jsx)(ze,{type:"text",className:it}),e.lenth<5&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("span",{children:"或"}),(0,Y.jsx)(oe,{type:"text",className:it})]})]})]})})};n(2564),n(4812);var ot=void 0;function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=function(e){return{curLibrary:e.curLibrary,fileList:e.fileList,loading:e.searchFileListLoading,curPaths:e.curPaths,needRefreshAt:e.needRefreshAt,setLoading:function(t){return e.setStore({key:"searchFileListLoading",value:t})},setFileList:function(t){return e.setStore({key:"fileList",value:t})},setCurPaths:function(t){return e.setStore({key:"curPaths",value:t})}}};const dt=(0,s.forwardRef)((function(e,t){(0,H.Z)(e);var n=(0,s.useState)(1),i=(0,u.Z)(n,2),o=i[0],d=i[1],p=function(e){var t=(0,s.useState)({width:0,height:0}),n=(0,u.Z)(t,2),r=n[0],i=n[1],a=(0,s.useRef)(null),o=(0,s.useCallback)((function(){var e=a.current||{clientWidth:0,clientHeight:0},t=e.clientWidth,n=e.clientHeight;i({width:t,height:n})}),[]);return(0,s.useImperativeHandle)(e,(function(){return{setWH:o}}),[]),(0,s.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;return function(){clearTimeout(r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(n)return e.apply(ot,a),void(n=!1);r=setTimeout(e.bind.apply(e,[ot].concat(a)),t)}}(o,100);e();var t,n,r,i=(t=a.current,n=e,(r=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(n)).observe(t,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),r);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),i&&(i.disconnect(),i.takeRecords())}}),[]),ut(ut({},r),{},{domRef:a,setWH:o})}(t),h=p.width,v=p.domRef,m=f(lt,l.X),x=m.curLibrary,y=m.fileList,j=m.loading,b=m.curPaths,g=m.needRefreshAt,w=m.setFileList,Z=m.setLoading,k=m.setCurPaths,P=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return",null);case 2:Z(!0),B({library:x,path:b.join("/")||null}).then((function(e){e.success&&w(e.data),Z(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){x&&P()}),[x,b,g]),(0,Y.jsx)(c.Z,{spinning:j,children:(0,Y.jsx)("div",{className:"container-pEpIZg",children:(0,Y.jsxs)(M.ZP,{autoInsertSpaceInButton:!1,theme:{token:{borderRadius:2,colorPrimary:"#2f54eb"}},children:[(0,Y.jsxs)("div",{className:"header-hQwR1N",children:[(0,Y.jsx)(W,{}),(0,Y.jsx)(Ye,{})]}),(0,Y.jsxs)("div",{className:"content-fksCrd",ref:v,style:{"--files-items-col":Math.floor((h-24)/240)||1},children:[y.length>0&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"list-t2hjvt",children:y.slice(30*(o-1),30*o).map((function(e,t){return(0,Y.jsx)(nt,{data:e,onClick:function(){var t;"dir"===(t=e).type&&k([].concat((0,F.Z)(b),[t.name]))}},t)}))}),(0,Y.jsx)("div",{className:"pagination-wuhSzA",children:(0,Y.jsx)(U.Z,{defaultPageSize:30,defaultCurrent:1,current:o,total:y.length,onChange:function(e){d(e)},hideOnSinglePage:!0})})]}),!j&&0===y.length&&(0,Y.jsx)(st,{})]})]})})})}));var ft=n(6050),pt=n(9101);var ht=function(e){return{curLibrary:e.curLibrary,librarys:e.librarys,searchFileListLoading:e.searchFileListLoading,updateCurLibrary:function(t){return e.setStore({key:"curLibrary",value:t})}}};const vt=function(){var e=f(ht,l.X),t=e.curLibrary,n=e.librarys,r=e.searchFileListLoading,i=e.updateCurLibrary,a={items:[{key:"rename",label:"重命名"},{key:"remove",label:"删除"}],onClick:function(e){console.log("click",e)}},o=function(e){return e!==t&&!r&&void i(e)};return(0,s.useEffect)((function(){n.length>0&&o(n[0].name)}),[n]),(0,Y.jsx)("div",{className:"container-uTLAY0",children:(0,Y.jsxs)(M.ZP,{autoInsertSpaceInButton:!1,theme:{token:{borderRadius:2,colorPrimary:"#2f54eb"}},children:[(0,Y.jsx)("div",{className:"header-d_5rOy"}),(0,Y.jsxs)("div",{className:"list-CnI02G",children:[(0,Y.jsx)("div",{className:"title-xDMlg5",children:"仓库列表"}),n.map((function(e,n){return(0,Y.jsx)("div",{className:Ae()("item-oaSDVc",t===e.name&&"select-TdyzzL"),onClick:function(){return o(e.name)},children:(0,Y.jsxs)("div",{className:"wrap-n0vvVn",children:[(0,Y.jsxs)("div",{className:"name-rTzRjx",children:[(0,Y.jsx)("span",{className:"icon-GpTohn",children:(0,Y.jsx)(ft.Z,{})}),(0,Y.jsx)("span",{children:e.name})]}),(0,Y.jsx)("div",{className:"actions-No2DPZ",children:(0,Y.jsx)(qe.Z,{menu:a,placement:"bottomRight",getPopupContainer:function(e){return e.parentElement},children:(0,Y.jsx)(V.ZP,{type:"text",size:"small",icon:(0,Y.jsx)(et.Z,{rotate:90})})})})]})},n)}))]}),(0,Y.jsxs)("div",{className:"footer-uwlcnw",children:[(0,Y.jsx)(pt.Z,{}),(0,Y.jsx)(Fe.Z,{})]})]})})};var mt=function(e){return{getLibrarys:function(t){return e.setStore({key:"librarys",value:t})}}};const xt=function(){var e=(0,s.useState)(!0),t=(0,u.Z)(e,2),n=t[0],r=t[1],i=f(mt,l.X);return(0,s.useEffect)((function(){I().then((function(e){null!=e&&e.message||i.getLibrarys(e||[]),r(!1)}))}),[]),(0,Y.jsx)(c.Z,{spinning:n,children:(0,Y.jsx)("main",{className:"main-TIEcrk",children:(0,Y.jsxs)("div",{className:"layout-HRZgst",children:[(0,Y.jsx)("div",{className:"left-utIp6O",children:(0,Y.jsx)(vt,{})}),(0,Y.jsx)("div",{className:"right-PqP_Gk",children:(0,Y.jsx)(dt,{})})]})})})};function yt(){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("react app bootstraped");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){return gt.apply(this,arguments)}function gt(){return(gt=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.render((0,Y.jsx)(xt,{}),t.container?t.container.querySelector("#root"):document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.unmountComponentAtNode(t.container?t.container.querySelector("#root"):document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update props",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(4150),window.__POWERED_BY_QIANKUN__||o.render((0,Y.jsx)(xt,{}),document.getElementById("root"))},4150:(e,t,n)=>{window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,i)=>{if(!n){var s=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],o=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var s={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,a.d(i,s),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="./",(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[s,o,c]=n,u=0;if(s.some((t=>0!==e[t]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(c)var l=c(a)}for(t&&t(n);u<s.length;u++)i=s[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(l)},n=self.webpackChunkmicro_app_files_=self.webpackChunkmicro_app_files_||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=a.O(void 0,[590],(()=>a(9745)));return a.O(s)})()));